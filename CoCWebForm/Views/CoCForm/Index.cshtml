@model CoCWebForm.Models.CoCDataModel

@{  
    ViewBag.Title = $"CoC Form-";  
} 
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<form id="sample-form" asp-action="AddSample" asp-controller="CoCForm"></form>
<style>
    legend {
        background-color: midnightblue;
        color: white;
        padding: 5px 10px
    }
    input {margin: 3px}
</style>
<h2> Chain of Custody Form </h2> 
<body>
    <form method="post">
        <fieldset>
            <legend>Work Order: @TempData["WorkOrderNum"]</legend>
                <label for="ServiceOrder">Project ID:</label>
                <input type="text" name="ServiceOrder" value="" />
            <p><div>
                <label for="TestCodes">Test Code:</label>
                <select name="TestCodes" id="TestCodes">
                    <option value="tbd1">TBD</option>
                    <option value="tbd2">TBD_2</option>
                    <option value="tbd3">TBD_3</option>
                    <option value="tbd4">TBD_4</option>
                </select>
            </div></p>
            <p><div>
                <label for="TssOffice">Special Instructions:</label><br />
                <textarea name="TssOffice" rows="4" cols="50"></textarea>
            </div></p>
            <p><div>
                <label for="TssOffice">TSS Office of Origin:</label>
                <input type="text" name="TssOffice" value="" />
            </div></p>
            <p><div>
                <label for="samples">Samples:</label>
                <table id="sampleTable" class="table table-bordered">
                    <thead>    
                        <tr>
                            <th>Sample ID</th>
                            <th>Media Type</th>
                            <th>ISO Class</th>
                            <th>Sample Type</th>
                            <th>Media Lot #</th>
                            <th>Sample Volume/Measure</th>
                        </tr>
                    </thead>
                    <tr id="tablerow0">
                            <td><div class="editor-field"><input class="tesxt-box single-line" name="SampleId[0]" type="text" value="" required="required" /></div></td>
                            <td><div class="editor-field"><input class="tesxt-box single-line" name="MediaType[0]" type="text" value="" required="required" /></div></td>
                            <td><div class="editor-field"><input class="tesxt-box single-line" name="IsoClass[0]" type="text" value="" required="required" /></div></td>
                            <td><div class="editor-field"><input class="tesxt-box single-line" name="SampleType[0]" type="text" value="" required="required" /></div></td>
                            <td><div class="editor-field"><input class="tesxt-box single-line" name="MediaLotNumber[0]" type="text" value="" required="required" /></div></td>
                            <td><div class="editor-field"><input class="tesxt-box single-line" name="SampleVol[0]" type="text" value="" required="required" /></div></td>
                            <td><button type="button" class="btn btn-primary" onclick="removeTr(0);">Delete</button></td>
                    </tr>
@*
                    <tbody id="samples">
                         @for (int i=0; i < Model.Samples.Count; i++)
                            {
                            <tr>
                                <td style="width:20%;">@Html.TextBoxFor(m => m.Samples[i].SampleId, new { @class = "validateSampleId" })</td>
                                <td style="width:20%;">@Html.TextBoxFor(m => m.Samples[i].MediaType, new { @class = "validateMediaType" })</td>
                                <td style="width:20%;">@Html.TextBoxFor(m => m.Samples[i].IsoClass, new { @class = "validateIsoClass" })</td>
                                <td style="width:20%;">@Html.TextBoxFor(m => m.Samples[i].SampleType, new { @class = "validateSampleType" })</td>
                                <td style="width:20%;">@Html.TextBoxFor(m => m.Samples[i].MediaLotNumber, new { @class = "validateMediaLotNumber" })</td>
                                <td style="width:20%;">@Html.TextBoxFor(m => m.Samples[i].SampleVol, new { @class = "validateSampleVol" })</td>
                            </tr>
                            }

                    </tbody>
                        <tr><td colspan="2"><input type="submit" form="sample-form" value="Add Sample" title="Add Sample" onclick="javascript:return ValidateSampleData();" /></td></tr>*@
                </table>
                <p><button id="add" type="button" class="btn btn-primary">Add</button></p>
            </div></p>
            <br />
            <p><div>
                <label for="SamplesDate">Sample Collection Date:</label>
                <input type="date" name="SamplesDate" value="" />
            </div></p>
            <p><div>
                <label for="ViableSampler">Viable Sampler:</label>
                <input type="text" name="ViableSampler" value="" />
            </div></p>
            <p><div>
                <label for="TechnicianName">Technician Name (eSignature):</label>
                <input type="text" name="TechnicianName" value="" />
            </div></p>
            <p><div>
                <label for="eSignDate">eSignature Date:</label>
                <input type="date" name="eSignDate" value="@DateTime.Today.ToString("yyyy-MM-dd")"/>
            </div></p>
            <p><div>
                <label for="TrackingNumber">Tracking Number:</label>
                    <input type="text" name="TrackingNumber" cols="50" value="" />
            </div></p>
            <p><div>
                <label>&nbsp;</label>
                <input type="submit" value="Submit" />
            </div></p>
        </fieldset>
    </form>
</body>

                @section Scripts{
                    <script type="text/javascript">
                        var counter = 1;
                        $(function (){
                            $('#add').click(function (){
                                $('<tr id="tablerow' + counter + '">' +
                                  '<td><div class="editor-field"><input class="tesxt-box single-line" name="SampleId[' + counter + ']" type="text" value="" required="required" /></div></td>' +
                                  '<td><div class="editor-field"><input class="tesxt-box single-line" name="MediaType[' + counter + ']" type="text" value="" required="required" /></div></td>' +
                                  '<td><div class="editor-field"><input class="tesxt-box single-line" name="IsoClass[' + counter + ']" type="text" value="" required="required" /></div></td>' +
                                  '<td><div class="editor-field"><input class="tesxt-box single-line" name="SampleType[' + counter + ']" type="text" value="" required="required" /></div></td>' +
                                  '<td><div class="editor-field"><input class="tesxt-box single-line" name="MediaLotNumber[' + counter + ']" type="text" value="" required="required" /></div></td>' +
                                  '<td><div class="editor-field"><input class="tesxt-box single-line" name="SampleVol[' + counter + ']" type="text" value="" required="required" /></div></td>' +
                                  '<td><button type="button" class="btn btn-primary" onclick="removeTr(' + counter + ');">Delete</button></td>'
                            ).appendTo('#sampleTable');
                            counter++;
                            return false;
                            });
                        });
                        function removeTr(index){
                            if (counter > 1) {
                                $('#tablerow' + index).remove();
                                counter--;
                            }
                            return false;
                        }
                    </script>
                }